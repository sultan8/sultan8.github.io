!function(){function e(t,n,r){function i(u,a){if(!n[u]){if(!t[u]){var l="function"==typeof require&&require;if(!a&&l)return l(u,!0);if(o)return o(u,!0);var s=new Error("Cannot find module '"+u+"'");throw s.code="MODULE_NOT_FOUND",s}var f=n[u]={exports:{}};t[u][0].call(f.exports,function(e){var n=t[u][1][e];return i(n||e)},f,f.exports,e,t,n,r)}return n[u].exports}for(var o="function"==typeof require&&require,u=0;u<r.length;u++)i(r[u]);return i}return e}()({1:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){r(this,e),this._types={},this._seq=0}return i(e,[{key:"on",value:function(e,t){var n=this._types[e];n||(n=this._types[e]={});var r="sub"+this._seq++;return n[r]=t,r}},{key:"off",value:function(e,t){var n=this._types[e];if("function"==typeof t){for(var r in n)if(n.hasOwnProperty(r)&&n[r]===t)return delete n[r],r;return!1}if("string"==typeof t)return!(!n||!n[t])&&(delete n[t],t);throw new Error("Unexpected type for listener")}},{key:"trigger",value:function(e,t,n){var r=this._types[e];for(var i in r)r.hasOwnProperty(i)&&r[i].call(n,t)}}]),e}();n["default"]=o},{}],2:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e){var t=e["var"]("filterset"),n=t.get();return n||(n=new f["default"],t.set(n)),n}function a(){return d++}Object.defineProperty(n,"__esModule",{value:!0}),n.FilterHandle=undefined;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=i(e("./events")),f=i(e("./filterset")),c=i(e("./group")),h=r(e("./util")),d=1;n.FilterHandle=function(){function e(t,n){o(this,e),this._eventRelay=new s["default"],this._emitter=new h.SubscriptionTracker(this._eventRelay),this._group=null,this._filterSet=null,this._filterVar=null,this._varOnChangeSub=null,this._extraInfo=h.extend({sender:this},n),this._id="filter"+a(),this.setGroup(t)}return l(e,[{key:"setGroup",value:function(e){var t=this;if(this._group!==e&&(this._group||e)&&(this._filterVar&&(this._filterVar.off("change",this._varOnChangeSub),this.clear(),this._varOnChangeSub=null,this._filterVar=null,this._filterSet=null),this._group=e,e)){e=(0,c["default"])(e),this._filterSet=u(e),this._filterVar=(0,c["default"])(e)["var"]("filter");var n=this._filterVar.on("change",function(e){t._eventRelay.trigger("change",e,t)});this._varOnChangeSub=n}}},{key:"_mergeExtraInfo",value:function(e){return h.extend({},this._extraInfo?this._extraInfo:null,e||null)}},{key:"close",value:function(){this._emitter.removeAllListeners(),this.clear(),this.setGroup(null)}},{key:"clear",value:function(e){this._filterSet&&(this._filterSet.clear(this._id),this._onChange(e))}},{key:"set",value:function(e,t){this._filterSet&&(this._filterSet.update(this._id,e),this._onChange(t))}},{key:"on",value:function(e,t){return this._emitter.on(e,t)}},{key:"off",value:function(e,t){return this._emitter.off(e,t)}},{key:"_onChange",value:function(e){this._filterSet&&this._filterVar.set(this._filterSet.value,this._mergeExtraInfo(e))}},{key:"filteredKeys",get:function(){return this._filterSet?this._filterSet.value:null}}]),e}()},{"./events":1,"./filterset":3,"./group":4,"./util":11}],3:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){return e===t?0:e<t?-1:e>t?1:void 0}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=e("./util"),a=function(){function e(){r(this,e),this.reset()}return o(e,[{key:"reset",value:function(){this._handles={},this._keys={},this._value=null,this._activeHandles=0}},{key:"update",value:function(e,t){null!==t&&(t=t.slice(0)).sort(i);var n=(0,u.diffSortedLists)(this._handles[e],t),r=n.added,o=n.removed;this._handles[e]=t;for(var a=0;a<r.length;a++)this._keys[r[a]]=(this._keys[r[a]]||0)+1;for(var l=0;l<o.length;l++)this._keys[o[l]]--;this._updateValue(t)}},{key:"_updateValue",value:function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this._allKeys,t=Object.keys(this._handles).length;if(0===t)this._value=null;else{this._value=[];for(var n=0;n<e.length;n++){this._keys[e[n]]===t&&this._value.push(e[n])}}}},{key:"clear",value:function(e){if("undefined"!=typeof this._handles[e]){var t=this._handles[e];t||(t=[]);for(var n=0;n<t.length;n++)this._keys[t[n]]--;delete this._handles[e],this._updateValue()}}},{key:"value",get:function(){return this._value}},{key:"_allKeys",get:function(){var e=Object.keys(this._keys);return e.sort(i),e}}]),e}();n["default"]=a},{"./util":11}],4:[function(e,t,n){(function(t){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){if(e&&"string"==typeof e)return s.hasOwnProperty(e)||(s[e]=new f(e)),s[e];if("object"===(void 0===e?"undefined":a(e))&&e._vars&&e["var"])return e;if(Array.isArray(e)&&1==e.length&&"string"==typeof e[0])return o(e[0]);throw new Error("Invalid groupName argument")}Object.defineProperty(n,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n["default"]=o;var l=r(e("./var"));t.__crosstalk_groups=t.__crosstalk_groups||{};var s=t.__crosstalk_groups,f=function(){function e(t){i(this,e),this.name=t,this._vars={}}return u(e,[{key:"var",value:function(e){if(!e||"string"!=typeof e)throw new Error("Invalid var name");return this._vars.hasOwnProperty(e)||(this._vars[e]=new l["default"](this,e)),this._vars[e]}},{key:"has",value:function(e){if(!e||"string"!=typeof e)throw new Error("Invalid var name");return this._vars.hasOwnProperty(e)}}]),e}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./var":12}],5:[function(e,t,n){(function(t){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){return f["var"](e)}function o(e){return f.has(e)}Object.defineProperty(n,"__esModule",{value:!0});var u=r(e("./group")),a=e("./selection"),l=e("./filter"),s=e("./input");e("./input_selectize"),e("./input_checkboxgroup"),e("./input_slider");var f=(0,u["default"])("default");t.Shiny&&t.Shiny.addCustomMessageHandler("update-client-value",function(e){"string"==typeof e.group?(0,u["default"])(e.group)["var"](e.name).set(e.value):i(e.name).set(e.value)});var c={group:u["default"],"var":i,has:o,SelectionHandle:a.SelectionHandle,FilterHandle:l.FilterHandle,bind:s.bind};n["default"]=c,t.crosstalk=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./filter":2,"./group":4,"./input":6,"./input_checkboxgroup":7,"./input_selectize":8,"./input_slider":9,"./selection":10}],6:[function(e,t,n){(function(e){"use strict";function t(t){l[t.className]=t,e.document&&"complete"!==e.document.readyState?a(function(){r()}):e.document&&setTimeout(r,100)}function r(){Object.keys(l).forEach(function(e){var t=l[e];a("."+t.className).not(".crosstalk-input-bound").each(function(e,n){u(t,n)})})}function i(e){return e.replace(/([!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~])/g,"\\$1")}function o(e){var t=a(e);Object.keys(l).forEach(function(n){t.hasClass(n)&&!t.hasClass("crosstalk-input-bound")&&u(l[n],e)})}function u(e,t){var n=a(t).find("script[type='application/json'][data-for='"+i(t.id)+"']"),r=JSON.parse(n[0].innerText),o=e.factory(t,r);a(t).data("crosstalk-instance",o),a(t).addClass("crosstalk-input-bound")}Object.defineProperty(n,"__esModule",{value:!0}),n.register=t,n.bind=r;var a=e.jQuery,l={};if(e.Shiny){var s=new e.Shiny.InputBinding,f=e.jQuery;f.extend(s,{find:function(e){return f(e).find(".crosstalk-input")},initialize:function(e){f(e).hasClass("crosstalk-input-bound")||o(e)},getId:function(e){return e.id},getValue:function(){},setValue:function(){},receiveMessage:function(){},subscribe:function(e){f(e).data("crosstalk-instance").resume()},unsubscribe:function(e){f(e).data("crosstalk-instance").suspend()}}),e.Shiny.inputBindings.register(s,"crosstalk.inputBinding")}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],7:[function(e){(function(t){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}var r=n(e("./input")),i=e("./filter"),o=t.jQuery;r.register({className:"crosstalk-input-checkboxgroup",factory:function(e,t){var n=new i.FilterHandle(t.group),r=void 0,u=o(e);return u.on("change","input[type='checkbox']",function(){var e=u.find("input[type='checkbox']:checked");if(0===e.length)r=null,n.clear();else{var i={};e.each(function(){t.map[this.value].forEach(function(e){i[e]=!0})});var o=Object.keys(i);o.sort(),r=o,n.set(o)}}),{suspend:function(){n.clear()},resume:function(){r&&n.set(r)}}}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./filter":2,"./input":6}],8:[function(e){(function(t){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}var r=n(e("./input")),i=n(e("./util")),o=e("./filter"),u=t.jQuery;r.register({className:"crosstalk-input-select",factory:function(e,t){var n=[{value:"",label:"(All)"}],r=i.dataframeToD3(t.items),a={options:n.concat(r),valueField:"value",labelField:"label",searchField:"label"},l=u(e).find("select")[0],s=u(l).selectize(a)[0].selectize,f=new o.FilterHandle(t.group),c=void 0;return s.on("change",function(){if(0===s.items.length)c=null,f.clear();else{var e={};s.items.forEach(function(n){t.map[n].forEach(function(t){e[t]=!0})});var n=Object.keys(e);n.sort(),c=n,f.set(n)}}),{suspend:function(){f.clear()},resume:function(){c&&f.set(c)}}}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./filter":2,"./input":6,"./util":11}],9:[function(e){(function(t){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e,t){for(var n=e.toString();n.length<t;)n="0"+n;return n}function i(e){return e instanceof Date?e.getUTCFullYear()+"-"+r(e.getUTCMonth()+1,2)+"-"+r(e.getUTCDate(),2):null}var o=function(){function e(e,t){var n=[],r=!0,i=!1,o=undefined;try{for(var u,a=e[Symbol.iterator]();!(r=(u=a.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(l){i=!0,o=l}finally{try{!r&&a["return"]&&a["return"]()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=n(e("./input")),a=e("./filter"),l=t.jQuery,s=t.strftime;u.register({className:"crosstalk-input-slider",factory:function(e,t){function n(){var e=f.data("ionRangeSlider").result,t=void 0,n=f.data("data-type");return t="date"===n?function(e){return i(new Date(+e))}:"datetime"===n?function(e){return+e/1e3}:function(e){return+e},"double"===f.data("ionRangeSlider").options.type?[t(e.from),t(e.to)]:t(e.from)}var r=new a.FilterHandle(t.group),u={},f=l(e).find("input"),c=f.data("data-type"),h=f.data("time-format"),d=f.data("round"),v=void 0;if("date"===c)v=s.utc(),u.prettify=function(e){return v(h,new Date(e))};else if("datetime"===c){var p=f.data("timezone");v=p?s.timezone(p):s,u.prettify=function(e){return v(h,new Date(e))}}else"number"===c&&void 0!==d&&(u.prettify=function(e){var t=Math.pow(10,d);return Math.round(e*t)/t});f.ionRangeSlider(u);var y=null;return f.on("change.crosstalkSliderInput",function(){if(!f.data("updating")&&!f.data("animating")){for(var e=n(),i=o(e,2),u=i[0],a=i[1],l=[],s=0;s<t.values.length;s++){var c=t.values[s];c>=u&&c<=a&&l.push(t.keys[s])}l.sort(),r.set(l),y=l}}),{suspend:function(){r.clear()},resume:function(){y&&r.set(y)}}}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./filter":2,"./input":6}],10:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.SelectionHandle=undefined;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=i(e("./events")),l=i(e("./group")),s=r(e("./util"));n.SelectionHandle=function(){function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null,n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;o(this,e),this._eventRelay=new a["default"],this._emitter=new s.SubscriptionTracker(this._eventRelay),this._group=null,this._var=null,this._varOnChangeSub=null,this._extraInfo=s.extend({sender:this},n),this.setGroup(t)}return u(e,[{key:"setGroup",value:function(e){var t=this;if(this._group!==e&&(this._group||e)&&(this._var&&(this._var.off("change",this._varOnChangeSub),this._var=null,this._varOnChangeSub=null),this._group=e,e)){this._var=(0,l["default"])(e)["var"]("selection");var n=this._var.on("change",function(e){t._eventRelay.trigger("change",e,t)});this._varOnChangeSub=n}}},{key:"_mergeExtraInfo",value:function(e){return s.extend({},this._extraInfo?this._extraInfo:null,e||null)}},{key:"set",value:function(e,t){this._var&&this._var.set(e,this._mergeExtraInfo(t))}},{key:"clear",value:function(e){this._var&&this.set(void 0,this._mergeExtraInfo(e))}},{key:"on",value:function(e,t){return this._emitter.on(e,t)}},{key:"off",value:function(e,t){return this._emitter.off(e,t)}},{key:"close",value:function(){this._emitter.removeAllListeners(),this.setGroup(null)}},{key:"value",get:function(){return this._var?this._var.get():null}}]),e}()},{"./events":1,"./group":4,"./util":11}],11:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0;i<n.length;i++){var o=n[i];if(null!=o)for(var u in o)o.hasOwnProperty(u)&&(e[u]=o[u])}return e}function o(e){for(var t=1;t<e.length;t++)if(e[t]<=e[t-1])throw new Error("List is not sorted or contains duplicate")}function u(e,t){var n=0,r=0;e||(e=[]),t||(t=[]);var i=[],u=[];for(o(e),o(t);n<e.length&&r<t.length;)e[n]===t[r]?(n++,r++):e[n]<t[r]?i.push(e[n++]):u.push(t[r++]);return n<e.length&&(i=i.concat(e.slice(n))),r<t.length&&(u=u.concat(t.slice(r))),{removed:i,added:u}}function a(e){var t=[],n=void 0;for(var r in e){if(e.hasOwnProperty(r)&&t.push(r),"object"!==s(e[r])||"undefined"==typeof e[r].length)throw new Error("All fields must be arrays");if(void 0!==n&&n!==e[r].length)throw new Error("All fields must be arrays of the same length");n=e[r].length}for(var i=[],o=void 0,u=0;u<n;u++){o={};for(var a=0;a<t.length;a++)o[t[a]]=e[t[a]][u];i.push(o)}return i}Object.defineProperty(n,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n.extend=i,n.checkSorted=o,n.diffSortedLists=u,n.dataframeToD3=a;n.SubscriptionTracker=function(){function e(t){r(this,e),this._emitter=t,this._subs={}}return l(e,[{key:"on",value:function(e,t){var n=this._emitter.on(e,t);return this._subs[n]=e,n}},{key:"off",value:function(e,t){var n=this._emitter.off(e,t);return n&&delete this._subs[n],n}},{key:"removeAllListeners",value:function(){var e=this,t=this._subs;this._subs={},Object.keys(t).forEach(function(n){e._emitter.off(t[n],n)})}}]),e}()},{}],12:[function(e,t,n){(function(t){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=r(e("./events")),l=function(){function e(t,n,r){i(this,e),this._group=t,this._name=n,this._value=r,this._events=new a["default"]}return u(e,[{key:"get",value:function(){return this._value}},{key:"set",value:function(e,n){if(this._value!==e){var r=this._value;this._value=e;var i={};if(n&&"object"===(void 0===n?"undefined":o(n)))for(var u in n)n.hasOwnProperty(u)&&(i[u]=n[u]);i.oldValue=r,i.value=e,this._events.trigger("change",i,this),t.Shiny&&t.Shiny.onInputChange&&t.Shiny.onInputChange(".clientValue-"+(null!==this._group.name?this._group.name+"-":"")+this._name,void 0===e?null:e)}}},{key:"on",value:function(e,t){return this._events.on(e,t)}},{key:"off",value:function(e,t){return this._events.off(e,t)}}]),e}();n["default"]=l}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./events":1}]},{},[5]);